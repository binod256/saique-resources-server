{"version":3,"file":"gas-manager.js","sourceRoot":"","sources":["../../src/gas-manager.ts"],"names":[],"mappings":"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","sourcesContent":["import { encodeFunctionData, type Address, type Chain, type Hex } from \"viem\";\nimport {\n  arbitrum,\n  arbitrumSepolia,\n  base,\n  baseSepolia,\n  fraxtal,\n  fraxtalSepolia,\n  mainnet,\n  optimism,\n  optimismSepolia,\n  polygon,\n  polygonAmoy,\n  unichainSepolia,\n  worldChainSepolia,\n  sepolia,\n  zora,\n  zoraSepolia,\n  shapeSepolia,\n  optimismGoerli,\n  arbitrumGoerli,\n  arbitrumNova,\n  baseGoerli,\n  beraChainBartio,\n  celoMainnet,\n  gensynTestnet,\n  goerli,\n  inkMainnet,\n  inkSepolia,\n  monadTestnet,\n  opbnbMainnet,\n  opbnbTestnet,\n  openlootSepolia,\n  polygonMumbai,\n  riseTestnet,\n  shape,\n  soneiumMainnet,\n  soneiumMinato,\n  storyAeneid,\n  storyMainnet,\n  teaSepolia,\n  unichainMainnet,\n  worldChain,\n} from \"./chains.js\";\nimport type { EntryPointVersion } from \"@aa-sdk/core\";\nexport const AlchemyPaymasterAddressV06Unify =\n  \"0x0000000000ce04e2359130e7d0204A5249958921\";\nexport const AlchemyPaymasterAddressV07Unify =\n  \"0x00000000000667F27D4DB42334ec11a25db7EBb4\";\n\nexport const AlchemyPaymasterAddressV4 =\n  \"0xEaf0Cde110a5d503f2dD69B3a49E031e29b3F9D2\";\nexport const AlchemyPaymasterAddressV3 =\n  \"0x4f84a207A80c39E9e8BaE717c1F25bA7AD1fB08F\";\nexport const AlchemyPaymasterAddressV2 =\n  \"0x4Fd9098af9ddcB41DA48A1d78F91F1398965addc\";\nexport const ArbSepoliaPaymasterAddress =\n  \"0x0804Afe6EEFb73ce7F93CD0d5e7079a5a8068592\";\nexport const AlchemyPaymasterAddressV1 =\n  \"0xc03aac639bb21233e0139381970328db8bceeb67\";\n\nexport const AlchemyPaymasterAddressV07V2 =\n  \"0x2cc0c7981D846b9F2a16276556f6e8cb52BfB633\";\nexport const AlchemyPaymasterAddressV07V1 =\n  \"0xEF725Aa22d43Ea69FB22bE2EBe6ECa205a6BCf5B\";\n\n/**\n * Retrieves the Alchemy paymaster address for the given chain. Returns different addresses based on the chain ID.\n *\n * @example\n * ```ts\n * import { sepolia, getAlchemyPaymasterAddress } from \"@account-kit/infra\";\n *\n * const paymasterAddress = getAlchemyPaymasterAddress(sepolia, \"0.6.0\");\n * ```\n *\n * @param {Chain} chain The chain for which the paymaster address is required\n * @param {EntryPointVersion} version The version of the entry point\n * @returns {Address} The Alchemy paymaster address corresponding to the specified chain\n */\nexport const getAlchemyPaymasterAddress = (\n  chain: Chain,\n  version: EntryPointVersion,\n): Address => {\n  switch (version) {\n    case \"0.6.0\":\n      switch (chain.id) {\n        case fraxtalSepolia.id:\n        case worldChainSepolia.id:\n        case shapeSepolia.id:\n        case unichainSepolia.id:\n        case opbnbTestnet.id:\n        case inkSepolia.id:\n        case monadTestnet.id:\n        case openlootSepolia.id:\n        case gensynTestnet.id:\n        case riseTestnet.id:\n        case storyAeneid.id:\n        case teaSepolia.id:\n        case arbitrumGoerli.id:\n        case goerli.id:\n        case optimismGoerli.id:\n        case baseGoerli.id:\n        case polygonMumbai.id:\n        case worldChain.id:\n        case shape.id:\n        case unichainMainnet.id:\n        case soneiumMinato.id:\n        case soneiumMainnet.id:\n        case opbnbMainnet.id:\n        case beraChainBartio.id:\n        case inkMainnet.id:\n        case arbitrumNova.id:\n        case storyMainnet.id:\n        case celoMainnet.id:\n          return AlchemyPaymasterAddressV4;\n        case polygonAmoy.id:\n        case optimismSepolia.id:\n        case baseSepolia.id:\n        case zora.id:\n        case zoraSepolia.id:\n        case fraxtal.id:\n          return AlchemyPaymasterAddressV3;\n        case mainnet.id:\n        case arbitrum.id:\n        case optimism.id:\n        case polygon.id:\n        case base.id:\n          return AlchemyPaymasterAddressV2;\n        case arbitrumSepolia.id:\n          return ArbSepoliaPaymasterAddress;\n        case sepolia.id:\n          return AlchemyPaymasterAddressV1;\n        default:\n          return AlchemyPaymasterAddressV06Unify;\n      }\n    case \"0.7.0\":\n      switch (chain.id) {\n        case arbitrumNova.id:\n        case celoMainnet.id:\n        case gensynTestnet.id:\n        case inkMainnet.id:\n        case inkSepolia.id:\n        case monadTestnet.id:\n        case opbnbMainnet.id:\n        case opbnbTestnet.id:\n        case openlootSepolia.id:\n        case riseTestnet.id:\n        case shape.id:\n        case shapeSepolia.id:\n        case soneiumMainnet.id:\n        case soneiumMinato.id:\n        case storyAeneid.id:\n        case storyMainnet.id:\n        case teaSepolia.id:\n        case unichainMainnet.id:\n        case unichainSepolia.id:\n        case worldChain.id:\n        case worldChainSepolia.id:\n          return AlchemyPaymasterAddressV07V1;\n        case arbitrum.id:\n        case arbitrumGoerli.id:\n        case arbitrumSepolia.id:\n        case base.id:\n        case baseGoerli.id:\n        case baseSepolia.id:\n        case beraChainBartio.id:\n        case fraxtal.id:\n        case fraxtalSepolia.id:\n        case goerli.id:\n        case mainnet.id:\n        case optimism.id:\n        case optimismGoerli.id:\n        case optimismSepolia.id:\n        case polygon.id:\n        case polygonAmoy.id:\n        case polygonMumbai.id:\n        case sepolia.id:\n        case zora.id:\n        case zoraSepolia.id:\n          return AlchemyPaymasterAddressV07V2;\n        default:\n          return AlchemyPaymasterAddressV07Unify;\n      }\n    default:\n      throw new Error(`Unsupported EntryPointVersion: ${version}`);\n  }\n};\n\nexport const PermitTypes = {\n  EIP712Domain: [\n    { name: \"name\", type: \"string\" },\n    { name: \"version\", type: \"string\" },\n    { name: \"chainId\", type: \"uint256\" },\n    { name: \"verifyingContract\", type: \"address\" },\n  ],\n  Permit: [\n    { name: \"owner\", type: \"address\" },\n    { name: \"spender\", type: \"address\" },\n    { name: \"value\", type: \"uint256\" },\n    { name: \"nonce\", type: \"uint256\" },\n    { name: \"deadline\", type: \"uint256\" },\n  ],\n} as const;\n\nexport const ERC20Abis = [\n  \"function decimals() public view returns (uint8)\",\n  \"function balanceOf(address owner) external view returns (uint256)\",\n  \"function allowance(address owner, address spender) external view returns (uint256)\",\n  \"function approve(address spender, uint256 amount) external returns (bool)\",\n] as const;\n\nexport const EIP7597Abis = [\n  \"function nonces(address owner) external view returns (uint)\",\n] as const;\n\nexport const approveTokenCallData = (\n  paymasterAddress: Address,\n  allowance: BigInt,\n) => {\n  return encodeFunctionData({\n    abi: ERC20Abis,\n    functionName: \"approve\",\n    args: [paymasterAddress, allowance],\n  });\n};\n\nexport type PermitMessage = {\n  owner: Hex;\n  spender: Hex;\n  value: bigint;\n  nonce: bigint;\n  deadline: bigint;\n};\n\nexport type PermitDomain = {\n  name: string;\n  version: string;\n  chainId: bigint;\n  verifyingContract: Hex;\n};\n"]}